{"version":3,"sources":["webpack:///resources/js/components/PaymentComponent.vue","webpack:///./resources/js/components/PaymentComponent.vue?34a3","webpack:///./resources/js/components/PaymentComponent.vue","webpack:///./resources/js/components/PaymentComponent.vue?6bf3"],"names":["component","_h","this","$createElement","_c","_self","staticClass","attrs","_v","on","paymentProcess"],"mappings":"yxBAQA,ICRgN,EDQhN,CACE,KAAF,mBACE,MAAF,CACI,sBAAJ,CACM,KAAN,QAEI,kBAAJ,CACM,KAAN,QAEI,QAAJ,CACM,KAAN,QAEI,gBAAJ,CACM,KAAN,QAEI,WAAJ,CACM,KAAN,QAEI,OAAJ,CACM,KAAN,SAGE,KAtBF,WAwBI,MAAJ,CACM,mBAAN,oBACM,cAAN,EACM,MAAN,0BAGE,MAAF,CACI,mBAAJ,YACM,KAAN,kBAGE,QAAF,CACI,eADJ,WAEM,IAAN,OAuCM,OArCA,KAAN,cACA,kBACQ,QAAR,YACQ,IAAR,8BACA,8BACU,eAAV,GACU,QAAV,YACY,EAAZ,iDAEU,MAAV,YACY,QAAZ,QAEU,MAAV,WACY,QAAZ,qCAIA,QACU,OAAV,EACU,SAAV,EACU,gBAAV,GACU,iBAAV,GACU,WAAV,QACU,YAAV,kBACU,aAAV,OACU,YAAV,OACU,UAAV,GACU,QAAV,WACA,gBAXA,CAYU,MAAV,mBA7BA,OAgCA,YACQ,QAAR,UAIA,SAGI,YA5CJ,WA8CM,IAAN,OAGM,OAAN,2BAEQ,EAAR,MACU,IAAV,oBACU,QAAV,CACY,eAAZ,8CAEU,KAAV,OACU,KAAV,CACY,QAAZ,gBACY,WAAZ,aACY,QAAZ,WAEU,QAAV,YACY,EAAZ,IAEU,MAAV,YACY,EAAZ,UAKI,gBAvEJ,SAuEA,OAEM,IAAN,OACM,QAAN,oBAEM,EAAN,aAEM,EAAN,MACQ,IAAR,wBACQ,KAAR,OACQ,KAAR,GACU,QAAV,EACU,OAAV,GACA,GAEQ,QAAR,YACU,EAAV,aACU,QAAV,0CACU,OAAV,iCAEQ,MAAR,YACU,EAAV,aACU,EAAV,wCAME,QAtIF,WAuII,QAAJ,0B,YExIIA,EAAY,YACd,GCRW,WAAa,IAAiBC,EAATC,KAAgBC,eAAmBC,EAAnCF,KAA0CG,MAAMD,IAAIH,EAAG,OAAOG,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACE,YAAY,cAAcC,MAAM,CAAC,GAAK,oBAA1HL,KAAkJM,GAAG,KAAKJ,EAAG,SAAS,CAACE,YAAY,qFAAqFC,MAAM,CAAC,GAAK,aAAa,KAAO,UAAUE,GAAG,CAAC,MAAtTP,KAAkUQ,iBAAiB,CAACN,EAAG,IAAI,CAACE,YAAY,2BAAxWJ,KAAuYM,GAAG,yBAAyBJ,EAAG,IAAI,CAACE,YAAY,qCACnc,IDUpB,EACA,KACA,WACA,MAIa,UAAAN,E","file":"9.js","sourcesContent":["<template>\n    <div>\n        <small class=\"text-danger\" id=\"errors_payment\"></small>\n        <button v-on:click=\"paymentProcess\" class=\"btn btn-block btn-dark d-flex align-items-center justify-content-between px-4 py-3\" id=\"pay-button\" type=\"buttom\"><i class=\"fa fa-credit-card mr-2\"></i> Processar pagamento <i class=\"far fa-arrow-right ml-auto\"></i></button>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"PaymentComponent\",\n        props: {\n            _routeRegisterPayment: {\n                type: String\n            },\n            _routeDataPayment: {\n                type: String\n            },\n            _userId: {\n                type: String\n            },\n            _routePurchases: {\n                type: String\n            },\n            _addressId : {\n                type: String\n            },\n            _total: {\n                type: Number\n            },\n        },\n        data() {\n\n            return {\n                freightOptionRadio: $(\".freightOption\"),\n                freightOption: 1,\n                total: parseFloat(this._total)\n            }\n        },\n        watch: {\n            freightOptionRadio: function (question) {\n                this.freightOption = 1\n            },\n        },\n        methods: {\n            paymentProcess() {\n                let app = this\n\n                this.dataPayment()\n                    .then(result => {\n                        console.log(result.data)\n                        let amount = parseInt(result.data.amount * 100);\n                        let checkout = new PagarMeCheckout.Checkout({\n                            encryption_key: '',\n                            success: function (data) {\n                                app.registerPayment(result.data.sale_id, result.data.amount, data)\n                            },\n                            error: function (err) {\n                                console.log(err);\n                            },\n                            close: function () {\n                                console.log('The modal has been closed.');\n                            }\n                        });\n\n                        checkout.open({\n                            amount: amount,\n                            capture: true,\n                            maxInstallments: 10,\n                            freeInstallments: 10,\n                            buttonText: 'Pagar',\n                            buttonClass: 'botao-pagamento',\n                            customerData: 'true',\n                            createToken: 'true',\n                            card_hash: \"\",\n                            uiColor: '#f54d15',\n                            ...result.data.customer,\n                            items: result.data.items\n                        });\n                    })\n                    .catch(error => {\n                        console.log(error)\n                        //let errors = error.responseJSON.errors\n                        //$(\"#errors_payment\").text(errors[Object.keys(errors)[0]]);\n                    })\n                return app.total;\n\n            },\n            dataPayment() {\n\n                let app = this\n\n\n                return new Promise((resolve, reject) => {\n\n                    $.ajax({\n                        url: app._routeDataPayment,\n                        headers: {\n                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                        },\n                        type: 'POST',\n                        data: {\n                            freight: app.freightOption,\n                            address_id: app._addressId,\n                            user_id: app._userId\n                        },\n                        success: function (data) {\n                            resolve(data)\n                        },\n                        error: function (error) {\n                            reject(error)\n                        },\n                    })\n                })\n            },\n            registerPayment(sale_id, amount, payload) {\n\n                let app = this\n                console.log('entrou ali', amount)\n\n                app.$loading(true);\n\n                $.ajax({\n                    url: app._routeRegisterPayment,\n                    type: 'POST',\n                    data: {\n                        sale_id: sale_id,\n                        amount: amount,\n                        ...payload\n                    },\n                    success: function (data) {\n                        app.$loading(false);\n                        console.log('vai redirecionar',app._routePurchases)\n                        window.location.href = app._routePurchases\n                    },\n                    error: function (error) {\n                        app.$loading(false);\n                        $(\"#errors_payment\").text(error.message);\n                    },\n                })\n\n            }\n        },\n        mounted() {\n            console.log(77777, this._userId)\n        },\n    }\n</script>\n<style scoped>\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaymentComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaymentComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PaymentComponent.vue?vue&type=template&id=6360ee72&scoped=true&\"\nimport script from \"./PaymentComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./PaymentComponent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6360ee72\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('small',{staticClass:\"text-danger\",attrs:{\"id\":\"errors_payment\"}}),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-block btn-dark d-flex align-items-center justify-content-between px-4 py-3\",attrs:{\"id\":\"pay-button\",\"type\":\"buttom\"},on:{\"click\":_vm.paymentProcess}},[_c('i',{staticClass:\"fa fa-credit-card mr-2\"}),_vm._v(\" Processar pagamento \"),_c('i',{staticClass:\"far fa-arrow-right ml-auto\"})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}