(window.webpackJsonp=window.webpackJsonp||[]).push([[3,5,7,9],{HcR1:function(t,e,s){"use strict";s.r(e);var r={name:"UserAddressComponent",props:{_userId:{type:String},_routeAddress:{type:String}},data:function(){return{user:this.getUserWithAddress(this._userId),address:null}},watch:{_userId:function(t){t>0&&this.getUserWithAddress(t)}},methods:{getUserWithAddress:function(t){var e=this;axios.get("/panel/clients/address/"+t).then((function(t){return e.address=t.data}))}},mounted:function(){this.getUserWithAddress(this._userId)}},a=s("KHd+"),n=Object(a.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticClass:"title mb-2"},[t._v("Endereço de Entrega")]),t._v(" "),t.address?s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("span",{staticClass:"mb-2 text-muted",staticStyle:{display:"block"}},[t._v("\n                                                        "+t._s(t.address.address)+",\n                                                        "+t._s(t.address.number)+",\n                                                        "+t._s(t.address.complement)+"\n                                                    ")]),t._v(" "),s("span",{staticClass:"card-text",staticStyle:{display:"block"}},[t._v(t._s(t.address.neighborhood))]),t._v(" "),s("span",{staticClass:"card-text",staticStyle:{display:"block"}},[t._v("CEP "+t._s(t.address.postal_code))])])]):t._e(),t._v(" "),s("h6",{staticClass:"mb-1 mt-1"},[t._v("Opções de entrega")]),t._v(" "),s("div",{staticClass:"form-row",attrs:{id:"freightOptions"}},[t.address?s("div",[s("a",{attrs:{href:"#"}},[t._v("Cadastrar endereço")])]):t._e()])])}),[],!1,null,"350b6011",null);e.default=n.exports},XO8y:function(t,e,s){"use strict";s.r(e);var r=s("HcR1"),a=s("wvRJ"),n={name:"CheckoutComponent",components:{UserAddressComponent:r.default,OrderSummaryComponent:a.default},props:{_users:{type:String},_routeAddressSelect:{type:String}},data:function(){return{users:JSON.parse(this._users),user:null,products:{},discount:null}},methods:{userChange:function(t){this.user=t}},watch:{}},o=s("KHd+"),i=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-12 "},[s("label",{attrs:{for:"user_id"}},[t._v("Usuário")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.user,expression:"user"}],staticClass:"form-control form-control-lg",staticStyle:{width:"100%"},attrs:{name:"user_id",id:"user_id"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.user=e.target.multiple?s:s[0]},function(e){return t.userChange(t.user)}]}},t._l(t.users,(function(e,r){return s("option",{domProps:{value:r}},[t._v("\n                        "+t._s(e)+"\n                    ")])})),0)])])]),t._v(" "),s("div",{staticClass:"col-sm-12"},[t.user?s("UserAddressComponent",{attrs:{"_user-id":t.user,"_route-address":t._routeAddressSelect}}):t._e()],1),t._v(" "),s("div",{staticClass:"col-sm-12"})])}),[],!1,null,"9bb0ea8e",null);e.default=i.exports},bpux:function(t,e,s){"use strict";s.r(e);function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o={name:"PaymentComponent",props:{_routeRegisterPayment:{type:String},_routeDataPayment:{type:String},_userId:{type:String},_routePurchases:{type:String},_addressId:{type:String},_total:{type:Number}},data:function(){return{freightOptionRadio:$(".freightOption"),freightOption:1,total:parseFloat(this._total)}},watch:{freightOptionRadio:function(t){this.freightOption=1}},methods:{paymentProcess:function(){var t=this;return this.dataPayment().then((function(e){console.log(e.data);var s=parseInt(100*e.data.amount);new PagarMeCheckout.Checkout({encryption_key:"",success:function(s){t.registerPayment(e.data.sale_id,e.data.amount,s)},error:function(t){console.log(t)},close:function(){console.log("The modal has been closed.")}}).open(a({amount:s,capture:!0,maxInstallments:10,freeInstallments:10,buttonText:"Pagar",buttonClass:"botao-pagamento",customerData:"true",createToken:"true",card_hash:"",uiColor:"#f54d15"},e.data.customer,{items:e.data.items}))})).catch((function(t){console.log(t)})),t.total},dataPayment:function(){var t=this;return new Promise((function(e,s){$.ajax({url:t._routeDataPayment,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",data:{freight:t.freightOption,address_id:t._addressId,user_id:t._userId},success:function(t){e(t)},error:function(t){s(t)}})}))},registerPayment:function(t,e,s){var r=this;console.log("entrou ali",e),r.$loading(!0),$.ajax({url:r._routeRegisterPayment,type:"POST",data:a({sale_id:t,amount:e},s),success:function(t){r.$loading(!1),console.log("vai redirecionar",r._routePurchases),window.location.href=r._routePurchases},error:function(t){r.$loading(!1),$("#errors_payment").text(t.message)}})}},mounted:function(){console.log(77777,this._userId)}},i=s("KHd+"),c=Object(i.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("small",{staticClass:"text-danger",attrs:{id:"errors_payment"}}),this._v(" "),e("button",{staticClass:"btn btn-block btn-dark d-flex align-items-center justify-content-between px-4 py-3",attrs:{id:"pay-button",type:"buttom"},on:{click:this.paymentProcess}},[e("i",{staticClass:"fa fa-credit-card mr-2"}),this._v(" Processar pagamento "),e("i",{staticClass:"far fa-arrow-right ml-auto"})])])}),[],!1,null,"6360ee72",null);e.default=c.exports},wvRJ:function(t,e,s){"use strict";s.r(e);var r={name:"OrderSummaryComponent",components:{PaymentComponent:s("bpux").default},props:{_products:{type:String,required:!0},_routeCoupon:{type:String},_userId:{type:String},_routeFreight:{type:String},_routeRegisterPayment:{type:String},_routeDataPayment:{type:String},_routePurchases:{type:String},_coupon:{type:String},_discount:{type:String},_dealerDiscount:{type:String},_dealerDiscountName:{type:String},_address:{type:String},_addressId:{type:String},_total:{type:String}},data:function(){return{listProducts:JSON.parse(this._products),discount:JSON.parse(this._discount),dealerDiscount:this._dealerDiscount?JSON.parse(this._dealerDiscount):null,coupon:null!==this._coupon?JSON.parse(this._coupon):"",total:parseFloat(this._total),cuponcode:""}},methods:{recalculate:function(t){var e=0;e=this.total+t,$("#total").text(e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))},freightCalculate:function(){var t=this;t.$loading(!0);var e=Array(),s=1;t._total;$.ajax({type:"POST",url:t._routeFreight,data:{postal_code:this._address},success:function(r,a){var n=r.data;$("#freightOptions").html(""),n.forEach((function(t){var s=t.price.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});e[t.code]=t.price;var r='<div class="col-md">\n    <div class="card">\n        <div class="card-body">\n            <div class="custom-control custom-radio">\n                <input class="custom-control-input" id=":id" name="freightOption" value=":value" type="radio" :checked>\n                <label class="custom-control-label" for=":id"><b>:description,</b><br> :complement</label>\n            </div>\n        </div>\n    </div>\n</div>';r=(r=(r=(r=(r=r.replace(":description",t.description)).replace(":value",t.code)).replace(":complement",t.price>0?"receber em até ".concat(t.deadline," dias úteis por ").concat(s):"frete grátis")).replace(":checked",1==t.code?"checked":"")).replace(/:id/g,"freight"+t.code),$("#freightOptions").append(r)})),$("#freightOptions input[type=radio][name='freightOption']").on("change",(function(){var r=$(this).val(),a=e[r];e[s],s=r,t.recalculate(a),a=a>0?a.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"frete grátis",$("#freight_value").text(a)})),t.$loading(!1)},error:function(e){t.$loading(!1)},dataType:"json"})},addCoupon:function(){$.ajax({type:"POST",url:this._routeCoupon,data:{coupon:this.cuponcode},success:function(t){$("#label-coupon").removeClass("text-danger"),$("#label-coupon").addClass("text-success"),$("#label-coupon").text(t.data.coupon),top.location.href=""},error:function(t,e){if(400==t.status){var s=t.responseJSON;s.hasOwnProperty("errors")&&($("#label-coupon").removeClass("text-success"),$("#label-coupon").addClass("text-danger"),$("#label-coupon").text(s.errors.coupon[0]))}}})}},mounted:function(){this.freightCalculate()}},a=s("KHd+"),n=Object(a.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card card-shadow mb-3"},[t._m(0),t._v(" "),t.listProducts?s("div",[s("table",{staticClass:"table table-sm table-striped bg-light"},[t._m(1),t._v(" "),s("tbody",[t._l(t.listProducts,(function(e){return s("tr",[s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),t._v(" "),s("td",{staticClass:"text-right"},[e.discounted_price!=e.price?s("small",{staticClass:"text-muted",staticStyle:{"text-decoration":"line-through"}},[t._v(t._s((e.quantity*e.price).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})))]):t._e(),s("br"),t._v("\n                            "+t._s((e.quantity*e.discounted_price).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))+"\n                        ")])])})),t._v(" "),t._m(2),t._v(" "),s("tr",[s("td",{staticClass:"bg-white border-0 pt-0 pb-2",attrs:{colspan:"2"}},[t._v("Total")]),t._v(" "),s("td",{staticClass:"font-weight-bold text-right bg-white border-0 pt-0 pb-2",attrs:{id:"total"}},[t._v(t._s(t.total.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})))])])],2)])]):t._e(),t._v(" "),s("hr",{staticClass:"m-0"}),t._v(" "),s("div",{staticClass:"card-body"},[t.discount?s("div",[s("div",{staticClass:"d-flex justify-content-between"},[s("span",[t._v("Desconto:")]),t._v(" "),s("strong",{staticClass:"text-success"},[t._v(t._s(t.discount.percentage?t.discount.value+"%":t.discount.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})+" de desconto"))])])]):t._e(),t._v(" "),t.coupon?s("div",[s("div",{staticClass:"d-flex justify-content-between"},[s("span",[t._v("Cupom:")]),t._v(" "),s("strong",{staticClass:"text-success"},[t._v(t._s(t.coupon.description+"  - "+(t.coupon.discount_in_percentage?t.coupon.value+"%":t.coupon.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))))])])]):t._e(),t._v(" "),this.dealerDiscount?s("div",[s("div",{staticClass:"d-flex justify-content-between"},[s("span",[t._v("Compra:")]),t._v(" "),s("strong",{staticClass:"text-success"},[t._v(t._s(this._dealerDiscountName+"  - "+(this.dealerDiscount.percentage?this.dealerDiscount.value+"%":"R$ "+this.dealerDiscount.value)))])])]):t._e()]),t._v(" "),s("hr",{staticClass:"m-0"}),t._v(" "),s("div",{staticClass:"card-body bg-light"},[s("strong",{staticClass:"d-block mb-2"},[t._v("Possui cupom ou vale?")]),t._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.cuponcode,expression:"cuponcode"}],staticClass:"form-control",attrs:{id:"cupom",name:"cupom",placeholder:"Cupom",type:"text"},domProps:{value:t.cuponcode},on:{input:function(e){e.target.composing||(t.cuponcode=e.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append",attrs:{id:"btnAddCupom"}},[s("a",{staticClass:"btn btn-dark text-white",on:{click:this.addCoupon}},[t._v("Aplicar")])])]),t._v(" "),s("small",{staticClass:"text-danger text- mt-2",attrs:{id:"label-coupon"}})])]),t._v(" "),s("PaymentComponent",{attrs:{"_route-register-payment":t._routeRegisterPayment,"_route-data-payment":t._routeDataPayment,_userId:t._userId,"_address-id":t._addressId,"_route-purchases":t._routePurchases,_total:t.total}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-body"},[e("h5",{staticClass:"m-0"},[this._v("Resumo do pedido")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Produto")]),this._v(" "),e("th",{staticClass:"text-center"},[this._v("Qtd.")]),this._v(" "),e("th",{staticClass:"text-right"},[this._v("Valor")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"bg-white pt-2 pb-0",attrs:{colspan:"2"}},[this._v("Frete")]),this._v(" "),e("td",{staticClass:"font-weight-bold text-right bg-white pt-2 pb-0",attrs:{id:"freigth_value"}},[this._v("Frete grátis")])])}],!1,null,null,null);e.default=n.exports}}]);
//# sourceMappingURL=async-checkout-component.js.map