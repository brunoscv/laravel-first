{"version":3,"sources":["webpack:///resources/js/components/PaymentComponent.vue","webpack:///./resources/js/components/PaymentComponent.vue?34a3","webpack:///./resources/js/components/PaymentComponent.vue","webpack:///./resources/js/components/PaymentComponent.vue?6bf3","webpack:///./resources/js/components/OrderSummaryComponent.vue?d140","webpack:///./resources/js/components/OrderSummaryComponent.vue?bfd2","webpack:///resources/js/components/OrderSummaryComponent.vue","webpack:///./resources/js/components/OrderSummaryComponent.vue"],"names":["component","_h","this","$createElement","_c","_self","staticClass","attrs","_v","on","paymentProcess","_vm","_m","_l","item","_s","name","quantity","discounted_price","price","staticStyle","toLocaleString","style","currency","_e","total","discount","percentage","value","coupon","description","discount_in_percentage","_dealerDiscountName","dealerDiscount","directives","rawName","expression","domProps","$event","target","composing","cuponcode","addCoupon","_routeRegisterPayment","_routeDataPayment","_userId","_addressId","_routePurchases"],"mappings":"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","file":"js/async-order-summary-component.js","sourcesContent":["<template>\n    <div>\n        <small class=\"text-danger\" id=\"errors_payment\"></small>\n        <button v-on:click=\"paymentProcess\" class=\"btn btn-block btn-dark d-flex align-items-center justify-content-between px-4 py-3\" id=\"pay-button\" type=\"buttom\"><i class=\"fa fa-credit-card mr-2\"></i> Processar pagamento <i class=\"far fa-arrow-right ml-auto\"></i></button>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"PaymentComponent\",\n        props: {\n            _routeRegisterPayment: {\n                type: String\n            },\n            _routeDataPayment: {\n                type: String\n            },\n            _userId: {\n                type: String\n            },\n            _routePurchases: {\n                type: String\n            },\n            _addressId : {\n                type: String\n            },\n            _total: {\n                type: Number\n            },\n        },\n        data() {\n\n            return {\n                freightOptionRadio: $(\".freightOption\"),\n                freightOption: 1,\n                total: parseFloat(this._total)\n            }\n        },\n        watch: {\n            freightOptionRadio: function (question) {\n                this.freightOption = 1\n            },\n        },\n        methods: {\n            paymentProcess() {\n                let app = this\n\n                this.dataPayment()\n                    .then(result => {\n                        console.log(result.data)\n                        let amount = parseInt(result.data.amount * 100);\n                        let checkout = new PagarMeCheckout.Checkout({\n                            encryption_key: '',\n                            success: function (data) {\n                                app.registerPayment(result.data.sale_id, result.data.amount, data)\n                            },\n                            error: function (err) {\n                                console.log(err);\n                            },\n                            close: function () {\n                                console.log('The modal has been closed.');\n                            }\n                        });\n\n                        checkout.open({\n                            amount: amount,\n                            capture: true,\n                            maxInstallments: 10,\n                            freeInstallments: 10,\n                            buttonText: 'Pagar',\n                            buttonClass: 'botao-pagamento',\n                            customerData: 'true',\n                            createToken: 'true',\n                            card_hash: \"\",\n                            uiColor: '#f54d15',\n                            ...result.data.customer,\n                            items: result.data.items\n                        });\n                    })\n                    .catch(error => {\n                        console.log(error)\n                        //let errors = error.responseJSON.errors\n                        //$(\"#errors_payment\").text(errors[Object.keys(errors)[0]]);\n                    })\n                return app.total;\n\n            },\n            dataPayment() {\n\n                let app = this\n\n\n                return new Promise((resolve, reject) => {\n\n                    $.ajax({\n                        url: app._routeDataPayment,\n                        headers: {\n                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                        },\n                        type: 'POST',\n                        data: {\n                            freight: app.freightOption,\n                            address_id: app._addressId,\n                            user_id: app._userId\n                        },\n                        success: function (data) {\n                            resolve(data)\n                        },\n                        error: function (error) {\n                            reject(error)\n                        },\n                    })\n                })\n            },\n            registerPayment(sale_id, amount, payload) {\n\n                let app = this\n                console.log('entrou ali', amount)\n\n                app.$loading(true);\n\n                $.ajax({\n                    url: app._routeRegisterPayment,\n                    type: 'POST',\n                    data: {\n                        sale_id: sale_id,\n                        amount: amount,\n                        ...payload\n                    },\n                    success: function (data) {\n                        app.$loading(false);\n                        console.log('vai redirecionar',app._routePurchases)\n                        window.location.href = app._routePurchases\n                    },\n                    error: function (error) {\n                        app.$loading(false);\n                        $(\"#errors_payment\").text(error.message);\n                    },\n                })\n\n            }\n        },\n        mounted() {\n            console.log(77777, this._userId)\n        },\n    }\n</script>\n<style scoped>\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaymentComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaymentComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PaymentComponent.vue?vue&type=template&id=6360ee72&scoped=true&\"\nimport script from \"./PaymentComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./PaymentComponent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6360ee72\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('small',{staticClass:\"text-danger\",attrs:{\"id\":\"errors_payment\"}}),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-block btn-dark d-flex align-items-center justify-content-between px-4 py-3\",attrs:{\"id\":\"pay-button\",\"type\":\"buttom\"},on:{\"click\":_vm.paymentProcess}},[_c('i',{staticClass:\"fa fa-credit-card mr-2\"}),_vm._v(\" Processar pagamento \"),_c('i',{staticClass:\"far fa-arrow-right ml-auto\"})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"card card-shadow mb-3\"},[_vm._m(0),_vm._v(\" \"),(_vm.listProducts)?_c('div',[_c('table',{staticClass:\"table table-sm table-striped bg-light\"},[_vm._m(1),_vm._v(\" \"),_c('tbody',[_vm._l((_vm.listProducts),function(item){return _c('tr',[_c('td',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('td',{staticClass:\"text-center\"},[_vm._v(_vm._s(item.quantity))]),_vm._v(\" \"),_c('td',{staticClass:\"text-right\"},[( item.discounted_price != item.price )?_c('small',{staticClass:\"text-muted\",staticStyle:{\"text-decoration\":\"line-through\"}},[_vm._v(_vm._s((item.quantity * item.price).toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})))]):_vm._e(),_c('br'),_vm._v(\"\\n                            \"+_vm._s((item.quantity * item.discounted_price).toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'}))+\"\\n                        \")])])}),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_c('tr',[_c('td',{staticClass:\"bg-white border-0 pt-0 pb-2\",attrs:{\"colspan\":\"2\"}},[_vm._v(\"Total\")]),_vm._v(\" \"),_c('td',{staticClass:\"font-weight-bold text-right bg-white border-0 pt-0 pb-2\",attrs:{\"id\":\"total\"}},[_vm._v(_vm._s(_vm.total.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})))])])],2)])]):_vm._e(),_vm._v(\" \"),_c('hr',{staticClass:\"m-0\"}),_vm._v(\" \"),_c('div',{staticClass:\"card-body\"},[(_vm.discount)?_c('div',[_c('div',{staticClass:\"d-flex justify-content-between\"},[_c('span',[_vm._v(\"Desconto:\")]),_vm._v(\" \"),_c('strong',{staticClass:\"text-success\"},[_vm._v(_vm._s((_vm.discount.percentage ? _vm.discount.value +\"%\" : _vm.discount.value.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'}) + \" de desconto\")))])])]):_vm._e(),_vm._v(\" \"),(_vm.coupon)?_c('div',[_c('div',{staticClass:\"d-flex justify-content-between\"},[_c('span',[_vm._v(\"Cupom:\")]),_vm._v(\" \"),_c('strong',{staticClass:\"text-success\"},[_vm._v(_vm._s(_vm.coupon.description + \"  - \" + (_vm.coupon.discount_in_percentage ? _vm.coupon.value + '%'  :  _vm.coupon.value.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'}))))])])]):_vm._e(),_vm._v(\" \"),(this.dealerDiscount)?_c('div',[_c('div',{staticClass:\"d-flex justify-content-between\"},[_c('span',[_vm._v(\"Compra:\")]),_vm._v(\" \"),_c('strong',{staticClass:\"text-success\"},[_vm._v(_vm._s(this._dealerDiscountName + \"  - \" + (this.dealerDiscount.percentage ? this.dealerDiscount.value + \"%\"  : \"R$ \" + this.dealerDiscount.value)))])])]):_vm._e()]),_vm._v(\" \"),_c('hr',{staticClass:\"m-0\"}),_vm._v(\" \"),_c('div',{staticClass:\"card-body bg-light\"},[_c('strong',{staticClass:\"d-block mb-2\"},[_vm._v(\"Possui cupom ou vale?\")]),_vm._v(\" \"),_c('div',{staticClass:\"input-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.cuponcode),expression:\"cuponcode\"}],staticClass:\"form-control\",attrs:{\"id\":\"cupom\",\"name\":\"cupom\",\"placeholder\":\"Cupom\",\"type\":\"text\"},domProps:{\"value\":(_vm.cuponcode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.cuponcode=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"input-group-append\",attrs:{\"id\":\"btnAddCupom\"}},[_c('a',{staticClass:\"btn btn-dark text-white\",on:{\"click\":this.addCoupon}},[_vm._v(\"Aplicar\")])])]),_vm._v(\" \"),_c('small',{staticClass:\"text-danger text- mt-2\",attrs:{\"id\":\"label-coupon\"}})])]),_vm._v(\" \"),_c('PaymentComponent',{attrs:{\"_route-register-payment\":_vm._routeRegisterPayment,\"_route-data-payment\":_vm._routeDataPayment,\"_userId\":_vm._userId,\"_address-id\":_vm._addressId,\"_route-purchases\":_vm._routePurchases,\"_total\":_vm.total}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"m-0\"},[_vm._v(\"Resumo do pedido\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Produto\")]),_vm._v(\" \"),_c('th',{staticClass:\"text-center\"},[_vm._v(\"Qtd.\")]),_vm._v(\" \"),_c('th',{staticClass:\"text-right\"},[_vm._v(\"Valor\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td',{staticClass:\"bg-white pt-2 pb-0\",attrs:{\"colspan\":\"2\"}},[_vm._v(\"Frete\")]),_vm._v(\" \"),_c('td',{staticClass:\"font-weight-bold text-right bg-white pt-2 pb-0\",attrs:{\"id\":\"freigth_value\"}},[_vm._v(\"Frete grátis\")])])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderSummaryComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderSummaryComponent.vue?vue&type=script&lang=js&\"","<template>\n    <div>\n        <div class=\"card card-shadow mb-3\">\n            <div class=\"card-body\">\n                <h5 class=\"m-0\">Resumo do pedido</h5>\n            </div>\n            <div v-if=\"listProducts\">\n                <table class=\"table table-sm table-striped bg-light\">\n                    <thead>\n                        <tr>\n                            <th>Produto</th>\n                            <th class=\"text-center\">Qtd.</th>\n                            <th class=\"text-right\">Valor</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"item in listProducts\">\n                            <td>{{ item.name }}</td>\n                            <td class=\"text-center\">{{ item.quantity }}</td>\n                            <td class=\"text-right\">\n                                <small v-if=\" item.discounted_price != item.price \"  class=\"text-muted\" style=\"text-decoration: line-through\">{{(item.quantity * item.price).toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'}) }}</small><br>\n                                {{ (item.quantity * item.discounted_price).toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})}}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td class=\"bg-white pt-2 pb-0\" colspan=\"2\">Frete</td>\n                            <td class=\"font-weight-bold text-right bg-white pt-2 pb-0\" id=\"freigth_value\">Frete grátis</td>\n                        </tr>\n                        <tr>\n                            <td class=\"bg-white border-0 pt-0 pb-2\" colspan=\"2\">Total</td>\n                            <td class=\"font-weight-bold text-right bg-white border-0 pt-0 pb-2\" id=\"total\">{{ total.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'}) }}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <hr class=\"m-0\">\n            <div class=\"card-body\">\n                <div v-if=\"discount\">\n                    <div class=\"d-flex justify-content-between\">\n                        <span>Desconto:</span>\n                        <strong class=\"text-success\">{{ (discount.percentage ? discount.value +\"%\" : discount.value.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'}) + \" de desconto\")}}</strong>\n                    </div>\n                </div>\n                <div v-if=\"coupon\">\n                    <div class=\"d-flex justify-content-between\">\n                        <span>Cupom:</span>\n                        <strong class=\"text-success\">{{ coupon.description + \"  - \" + (coupon.discount_in_percentage ? coupon.value + '%'  :  coupon.value.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})) }}</strong>\n                    </div>\n                </div>\n                <div v-if=\"this.dealerDiscount\">\n                    <div class=\"d-flex justify-content-between\">\n                        <span>Compra:</span>\n                        <strong class=\"text-success\">{{ this._dealerDiscountName + \"  - \" + (this.dealerDiscount.percentage ? this.dealerDiscount.value + \"%\"  : \"R$ \" + this.dealerDiscount.value) }}</strong>\n                    </div>\n                </div>\n            </div>\n            <hr class=\"m-0\">\n            <div class=\"card-body bg-light\">\n                <strong class=\"d-block mb-2\">Possui cupom ou vale?</strong>\n                <div class=\"input-group\">\n                    <input v-model=\"cuponcode\" class=\"form-control\" id=\"cupom\" name=\"cupom\" placeholder=\"Cupom\" type=\"text\">\n                    <div class=\"input-group-append\" id=\"btnAddCupom\">\n                        <a @click=\"this.addCoupon\" class=\"btn btn-dark text-white\">Aplicar</a>\n                    </div>\n                </div>\n                <small class=\"text-danger text- mt-2\" id=\"label-coupon\"></small>\n            </div>\n        </div>\n        <PaymentComponent\n            :_route-register-payment=\"_routeRegisterPayment\"\n            :_route-data-payment=\"_routeDataPayment\"\n            :_userId=\"_userId\"\n            :_address-id=\"_addressId\"\n            :_route-purchases=\"_routePurchases\"\n            :_total=\"total\">\n        </PaymentComponent>\n    </div>\n</template>\n<script>\n    import PaymentComponent from \"./PaymentComponent\";\n    export default {\n        name: \"OrderSummaryComponent\",\n        components: {PaymentComponent},\n        props: {\n            _products: {\n                type: String,\n                required: true\n            },\n            _routeCoupon: {\n                type: String\n            },\n            _userId: {\n                type: String\n            },\n            _routeFreight: {\n                type: String\n            },\n            _routeRegisterPayment: {\n                type: String\n            },\n            _routeDataPayment: {\n                type: String\n            },\n            _routePurchases: {\n                type: String\n            },\n            _coupon: {\n                type: String\n            },\n            _discount: {\n                type: String\n            },\n            _dealerDiscount: {\n                type: String\n            },\n            _dealerDiscountName: {\n                type: String\n            },\n            _address: {\n                type: String\n            },\n            _addressId: {\n                type: String\n            },\n            _total: {\n                type: String\n            },\n        },\n        data() {\n            return {\n                listProducts: JSON.parse(this._products),\n                discount: JSON.parse(this._discount),\n                dealerDiscount: this._dealerDiscount ? JSON.parse(this._dealerDiscount) : null,\n                coupon: this._coupon !== null ? (JSON.parse(this._coupon)) : '',\n                total: parseFloat(this._total),\n                cuponcode: '',\n            }\n        },\n        methods: {\n            recalculate(additional) {\n                let total_local = 0\n                total_local = this.total + additional;\n                $(\"#total\").text(\n                    total_local.toLocaleString('pt-BR', {\n                        style: 'currency',\n                        currency: 'BRL'\n                    })\n                );\n            },\n            freightCalculate() {\n                let app = this\n\n                app.$loading(true);\n                let freightOptions = Array();\n                let freightSelected = 1;\n                let total = app._total\n                let freightOption = '<div class=\"col-md\">\\n' +\n                                    '    <div class=\"card\">\\n' +\n                                    '        <div class=\"card-body\">\\n' +\n                                    '            <div class=\"custom-control custom-radio\">\\n' +\n                                    '                <input class=\"custom-control-input\" id=\":id\" name=\"freightOption\" value=\":value\" type=\"radio\" :checked>\\n' +\n                                    '                <label class=\"custom-control-label\" for=\":id\"><b>:description,</b><br> :complement</label>\\n' +\n                                    '            </div>\\n' +\n                                    '        </div>\\n' +\n                                    '    </div>\\n' +\n                                    '</div>'\n                $.ajax({\n                    type: \"POST\",\n                    url: app._routeFreight,\n                    data: {\n                        postal_code: this._address\n                    },\n                    success: function (response, status) {\n                        let result = response.data\n                        $(\"#freightOptions\").html('')\n                        result.forEach(function (service) {\n                            let price = (service.price).toLocaleString('pt-BR', {\n                                style: 'currency',\n                                currency: 'BRL'\n                            })\n\n                            freightOptions[service.code] = service.price;\n\n                            let item = freightOption\n                            item = item.replace(':description', service.description)\n                            item = item.replace(':value', service.code)\n                            item = item.replace(':complement', service.price > 0 ? `receber em até ${service.deadline} dias úteis por ${price}` : 'frete grátis')\n                            item = item.replace(':checked', service.code == 1 ? 'checked' : '')\n                            item = item.replace(/:id/g, \"freight\" + service.code)\n                            $(\"#freightOptions\").append(item)\n                        })\n                        $(\"#freightOptions input[type=radio][name='freightOption']\").on('change', function () {\n                            let freihtCode = $(this).val();\n                            let price = freightOptions[freihtCode]\n                            total -= freightOptions[freightSelected]\n                            freightSelected = freihtCode\n                            app.recalculate(price);\n                            price = price > 0 ? price.toLocaleString('pt-BR', {\n                                style: 'currency',\n                                currency: 'BRL'\n                            }) : \"frete grátis\"\n                            $(\"#freight_value\").text(price)\n\n                        });\n                        app.$loading(false);\n                    },\n                    error: function (err) {\n                        app.$loading(false);\n                    },\n                    dataType: \"json\"\n                });\n            },\n            addCoupon() {\n\n                let app = this\n                let errors = false\n\n                if (!errors) {\n                    $.ajax({\n                        type: 'POST',\n                        url: app._routeCoupon,\n                        data: {\n                            coupon: app.cuponcode,\n                        },\n                        success: function (dados) {\n                            $(\"#label-coupon\").removeClass('text-danger');\n                            $(\"#label-coupon\").addClass('text-success');\n                            $(\"#label-coupon\").text(dados.data[\"coupon\"]);\n                            top.location.href = \"\";\n                        },\n                        error: function (request, error) {\n                            if (request.status == 400) {\n                                let result = request.responseJSON\n                                if (result.hasOwnProperty(\"errors\")) {\n                                    $(\"#label-coupon\").removeClass('text-success');\n                                    $(\"#label-coupon\").addClass('text-danger');\n                                    $(\"#label-coupon\").text(result.errors[\"coupon\"][0]);\n                                }\n                            }\n                        }\n                    });\n\n                }\n            }\n        },\n        mounted() {\n            this.freightCalculate();\n        },\n    }\n</script>\n","import { render, staticRenderFns } from \"./OrderSummaryComponent.vue?vue&type=template&id=9d820e1a&\"\nimport script from \"./OrderSummaryComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderSummaryComponent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}