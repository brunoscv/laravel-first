(window.webpackJsonp=window.webpackJsonp||[]).push([[5,9],{bpux:function(t,e,r){"use strict";r.r(e);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o={name:"PaymentComponent",props:{_routeRegisterPayment:{type:String},_routeDataPayment:{type:String},_userId:{type:String},_routePurchases:{type:String},_addressId:{type:String},_total:{type:Number}},data:function(){return{freightOptionRadio:$(".freightOption"),freightOption:1,total:parseFloat(this._total)}},watch:{freightOptionRadio:function(t){this.freightOption=1}},methods:{paymentProcess:function(){var t=this;return this.dataPayment().then((function(e){console.log(e.data);var r=parseInt(100*e.data.amount);new PagarMeCheckout.Checkout({encryption_key:"",success:function(r){t.registerPayment(e.data.sale_id,e.data.amount,r)},error:function(t){console.log(t)},close:function(){console.log("The modal has been closed.")}}).open(s({amount:r,capture:!0,maxInstallments:10,freeInstallments:10,buttonText:"Pagar",buttonClass:"botao-pagamento",customerData:"true",createToken:"true",card_hash:"",uiColor:"#f54d15"},e.data.customer,{items:e.data.items}))})).catch((function(t){console.log(t)})),t.total},dataPayment:function(){var t=this;return new Promise((function(e,r){$.ajax({url:t._routeDataPayment,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",data:{freight:t.freightOption,address_id:t._addressId,user_id:t._userId},success:function(t){e(t)},error:function(t){r(t)}})}))},registerPayment:function(t,e,r){var a=this;console.log("entrou ali",e),a.$loading(!0),$.ajax({url:a._routeRegisterPayment,type:"POST",data:s({sale_id:t,amount:e},r),success:function(t){a.$loading(!1),console.log("vai redirecionar",a._routePurchases),window.location.href=a._routePurchases},error:function(t){a.$loading(!1),$("#errors_payment").text(t.message)}})}},mounted:function(){console.log(77777,this._userId)}},i=r("KHd+"),c=Object(i.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("small",{staticClass:"text-danger",attrs:{id:"errors_payment"}}),this._v(" "),e("button",{staticClass:"btn btn-block btn-dark d-flex align-items-center justify-content-between px-4 py-3",attrs:{id:"pay-button",type:"buttom"},on:{click:this.paymentProcess}},[e("i",{staticClass:"fa fa-credit-card mr-2"}),this._v(" Processar pagamento "),e("i",{staticClass:"far fa-arrow-right ml-auto"})])])}),[],!1,null,"6360ee72",null);e.default=c.exports},wvRJ:function(t,e,r){"use strict";r.r(e);var a={name:"OrderSummaryComponent",components:{PaymentComponent:r("bpux").default},props:{_products:{type:String,required:!0},_routeCoupon:{type:String},_userId:{type:String},_routeFreight:{type:String},_routeRegisterPayment:{type:String},_routeDataPayment:{type:String},_routePurchases:{type:String},_coupon:{type:String},_discount:{type:String},_dealerDiscount:{type:String},_dealerDiscountName:{type:String},_address:{type:String},_addressId:{type:String},_total:{type:String}},data:function(){return{listProducts:JSON.parse(this._products),discount:JSON.parse(this._discount),dealerDiscount:this._dealerDiscount?JSON.parse(this._dealerDiscount):null,coupon:null!==this._coupon?JSON.parse(this._coupon):"",total:parseFloat(this._total),cuponcode:""}},methods:{recalculate:function(t){var e=0;e=this.total+t,$("#total").text(e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))},freightCalculate:function(){var t=this;t.$loading(!0);var e=Array(),r=1;t._total;$.ajax({type:"POST",url:t._routeFreight,data:{postal_code:this._address},success:function(a,s){var n=a.data;$("#freightOptions").html(""),n.forEach((function(t){var r=t.price.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});e[t.code]=t.price;var a='<div class="col-md">\n    <div class="card">\n        <div class="card-body">\n            <div class="custom-control custom-radio">\n                <input class="custom-control-input" id=":id" name="freightOption" value=":value" type="radio" :checked>\n                <label class="custom-control-label" for=":id"><b>:description,</b><br> :complement</label>\n            </div>\n        </div>\n    </div>\n</div>';a=(a=(a=(a=(a=a.replace(":description",t.description)).replace(":value",t.code)).replace(":complement",t.price>0?"receber em até ".concat(t.deadline," dias úteis por ").concat(r):"frete grátis")).replace(":checked",1==t.code?"checked":"")).replace(/:id/g,"freight"+t.code),$("#freightOptions").append(a)})),$("#freightOptions input[type=radio][name='freightOption']").on("change",(function(){var a=$(this).val(),s=e[a];e[r],r=a,t.recalculate(s),s=s>0?s.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"frete grátis",$("#freight_value").text(s)})),t.$loading(!1)},error:function(e){t.$loading(!1)},dataType:"json"})},addCoupon:function(){$.ajax({type:"POST",url:this._routeCoupon,data:{coupon:this.cuponcode},success:function(t){$("#label-coupon").removeClass("text-danger"),$("#label-coupon").addClass("text-success"),$("#label-coupon").text(t.data.coupon),top.location.href=""},error:function(t,e){if(400==t.status){var r=t.responseJSON;r.hasOwnProperty("errors")&&($("#label-coupon").removeClass("text-success"),$("#label-coupon").addClass("text-danger"),$("#label-coupon").text(r.errors.coupon[0]))}}})}},mounted:function(){this.freightCalculate()}},s=r("KHd+"),n=Object(s.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"card card-shadow mb-3"},[t._m(0),t._v(" "),t.listProducts?r("div",[r("table",{staticClass:"table table-sm table-striped bg-light"},[t._m(1),t._v(" "),r("tbody",[t._l(t.listProducts,(function(e){return r("tr",[r("td",[t._v(t._s(e.name))]),t._v(" "),r("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),t._v(" "),r("td",{staticClass:"text-right"},[e.discounted_price!=e.price?r("small",{staticClass:"text-muted",staticStyle:{"text-decoration":"line-through"}},[t._v(t._s((e.quantity*e.price).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})))]):t._e(),r("br"),t._v("\n                            "+t._s((e.quantity*e.discounted_price).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))+"\n                        ")])])})),t._v(" "),t._m(2),t._v(" "),r("tr",[r("td",{staticClass:"bg-white border-0 pt-0 pb-2",attrs:{colspan:"2"}},[t._v("Total")]),t._v(" "),r("td",{staticClass:"font-weight-bold text-right bg-white border-0 pt-0 pb-2",attrs:{id:"total"}},[t._v(t._s(t.total.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})))])])],2)])]):t._e(),t._v(" "),r("hr",{staticClass:"m-0"}),t._v(" "),r("div",{staticClass:"card-body"},[t.discount?r("div",[r("div",{staticClass:"d-flex justify-content-between"},[r("span",[t._v("Desconto:")]),t._v(" "),r("strong",{staticClass:"text-success"},[t._v(t._s(t.discount.percentage?t.discount.value+"%":t.discount.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})+" de desconto"))])])]):t._e(),t._v(" "),t.coupon?r("div",[r("div",{staticClass:"d-flex justify-content-between"},[r("span",[t._v("Cupom:")]),t._v(" "),r("strong",{staticClass:"text-success"},[t._v(t._s(t.coupon.description+"  - "+(t.coupon.discount_in_percentage?t.coupon.value+"%":t.coupon.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))))])])]):t._e(),t._v(" "),this.dealerDiscount?r("div",[r("div",{staticClass:"d-flex justify-content-between"},[r("span",[t._v("Compra:")]),t._v(" "),r("strong",{staticClass:"text-success"},[t._v(t._s(this._dealerDiscountName+"  - "+(this.dealerDiscount.percentage?this.dealerDiscount.value+"%":"R$ "+this.dealerDiscount.value)))])])]):t._e()]),t._v(" "),r("hr",{staticClass:"m-0"}),t._v(" "),r("div",{staticClass:"card-body bg-light"},[r("strong",{staticClass:"d-block mb-2"},[t._v("Possui cupom ou vale?")]),t._v(" "),r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.cuponcode,expression:"cuponcode"}],staticClass:"form-control",attrs:{id:"cupom",name:"cupom",placeholder:"Cupom",type:"text"},domProps:{value:t.cuponcode},on:{input:function(e){e.target.composing||(t.cuponcode=e.target.value)}}}),t._v(" "),r("div",{staticClass:"input-group-append",attrs:{id:"btnAddCupom"}},[r("a",{staticClass:"btn btn-dark text-white",on:{click:this.addCoupon}},[t._v("Aplicar")])])]),t._v(" "),r("small",{staticClass:"text-danger text- mt-2",attrs:{id:"label-coupon"}})])]),t._v(" "),r("PaymentComponent",{attrs:{"_route-register-payment":t._routeRegisterPayment,"_route-data-payment":t._routeDataPayment,_userId:t._userId,"_address-id":t._addressId,"_route-purchases":t._routePurchases,_total:t.total}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-body"},[e("h5",{staticClass:"m-0"},[this._v("Resumo do pedido")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Produto")]),this._v(" "),e("th",{staticClass:"text-center"},[this._v("Qtd.")]),this._v(" "),e("th",{staticClass:"text-right"},[this._v("Valor")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"bg-white pt-2 pb-0",attrs:{colspan:"2"}},[this._v("Frete")]),this._v(" "),e("td",{staticClass:"font-weight-bold text-right bg-white pt-2 pb-0",attrs:{id:"freigth_value"}},[this._v("Frete grátis")])])}],!1,null,null,null);e.default=n.exports}}]);
//# sourceMappingURL=async-order-summary-component.js.map